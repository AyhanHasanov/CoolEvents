@using CoolEvents.Data;
@using CoolEvents.ExtensionMethods


@{
    User loggedUser = this.ViewContext.HttpContext.Session.GetObject<User>("loggedUser");
}

<html>
<head>
    <title>@ViewData["title"]</title>
    <link href="~/site.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/CoolEvents.styles.css" asp-append-version="true" />
</head>
<body>
    <div class="container header">
        <h1 class="title">Cool Events :D</h1>
        <div class="welcomeMsg">
            <span>
                Hello,
                @(loggedUser == null ? "Annonymous" : loggedUser.Username)
                @* @(loggedUser == null ? "" : $"({loggedUser.Role})")*@
            </span>
        </div>
    </div>
    <div class="container">
        <ul class="menu">
            <li><a href="/Home/Index">HOME</a></li>
            @if (loggedUser != null)
            {
                if (loggedUser.RoleId == 1)
                {
                    <li><a href="/Users/Index">USERS</a></li>
                }

                <li><a href="/Tickets/Index">MY TICKETS</a></li>
                <li><a href="/Home/Logout">LOGOUT</a></li>
                <li><a href="/Events/Index">EVENTS</a></li>
            }
            else
            {
                <li><a href="/Home/Login">LOGIN</a></li>
                <li><a href="/Home/Register">REGISTER</a></li>
            }
        </ul>
    </div>
    <div class="container">
        @RenderBody()
    </div>
</body>
</html>